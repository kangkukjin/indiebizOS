# IndieBiz OS

**개인과 소규모 비즈니스를 위한 AI 운영체제**

[홈페이지](https://indiebiz-homepage.vercel.app) | [English](README.md) | 한국어

IndieBiz OS는 단순한 AI 챗봇이 아닙니다. 나만의 AI 인격을 설계하고, 원클릭으로 작업을 자동화하며, 탈중앙 네트워크로 연결되는 완전한 운영체제입니다.

---

## 세 가지 핵심 가치

### 1. 나만의 AI 인격 설계

단순히 "의사처럼 행동해"가 아닙니다. **누구**인지, **어떻게** 대화하는지를 정의하세요.

```yaml
# 예시: 따뜻한 내과 전문의
agents:
  김_원장:
    role: |
      당신은 20년 경력의 내과 전문의 김원장입니다.
      항상 환자의 걱정을 먼저 인정한 후 질문합니다.
      의학 용어는 일상 언어로 설명합니다.
      모든 상담은 명확한 다음 단계와 안심의 말로 마무리합니다.
    model: claude-sonnet
    allowed_nodes: [source, system, forge, interface, stream, messenger]
```

| 일반 AI | IndieBiz 인격 |
|---------|--------------|
| "고혈압일 수 있습니다. 병원에 가보세요." | "걱정되시는 마음 충분히 이해합니다. 몇 가지 먼저 여쭤볼게요... 기록을 보니, 이렇게 하시면 좋겠습니다..." |
| 정보 전달 | 맥락을 가진 공감 대화 |

**각 에이전트는 당신의 맥락을 기억합니다** - 복용 중인 약, 선호사항, 지난 대화들. 범용 어시스턴트가 아니라 **당신만의** 전문가입니다.

### 2. 스위치 & 워크플로우로 원클릭 자동화

같은 AI 대화를 반복하지 마세요. **스위치나 워크플로우로 저장**하고 원클릭으로 실행하세요.

**스위치** - 프롬프트 + 에이전트 쌍을 저장해서 원클릭 실행:
```
[토글] 일일 기술 뉴스  →  클릭  →  끝!
         ↓
    AI가 정의된 프롬프트 실행
         ↓
    결과가 outputs/daily_news.md에 저장
```

**워크플로우** - IBL 문법으로 여러 액션을 재사용 가능한 파이프라인으로 연결:
```
[source:search]("AI 뉴스") {type: "news"}
  >> [system:agent_ask_sync]("컨텐츠/컨텐츠") {message: "이 기사들을 요약해줘"}
  >> [system:file]("news_report.html") {format: "html"}
```

**기능:**
- **자연어 또는 IBL 코드** - 평소처럼 프롬프트를 쓰거나 액션 체인을 프로그래밍
- **예약 실행** - 매일 오전 8시, 매주 금요일 자동 실행
- **에이전트 지정** - 어떤 에이전트가 처리할지 지정
- **파이프라인 연산자** - 순차(>>), 병렬(&), 폴백(??)
- **별칭 실행** - 저장된 워크플로우를 이름으로 실행: `[system:run]("kinsight")`

### 3. P2P 네트워크 (IndieNet)

탈중앙화된 검열 저항 네트워크로 연결하세요.

- **Nostr 프로토콜** - 중앙 서버 없음, 데이터 수집 없음
- **공개 게시판** - 다른 IndieBiz 사용자와 공유하고 발견
- **암호화 DM** - 당신과 수신자만 읽을 수 있는 비공개 메시지
- **비즈니스 네트워크** - 파트너 관리, 문의에 자동 응답

---

## 왜 IndieBiz OS인가?

### "만능 AI"의 문제점

대부분의 AI 시스템은 하나의 전지전능한 어시스턴트를 목표로 합니다. 이 접근 방식은 다음과 같은 이유로 실패합니다:

- **맥락 오염**: 의료 상담이 하드웨어 프로젝트와 섞입니다
- **개인화 부재**: 모든 AI가 똑같이 들리고, 범용적인 응답만 합니다
- **자동화 부재**: 모든 작업을 수동으로 트리거해야 합니다
- **플랫폼 종속**: 당신의 데이터가 그들의 서버에 있습니다

### IndieBiz의 접근 방식

> "하나의 만능 AI보다 여러 목적별 AI가 낫다"

![IndieBiz OS 런처](fig1.jpg)
*OS 데스크톱처럼 프로젝트 폴더 - 각 폴더는 격리된 AI 작업공간*

![에이전트 팀](fig2.jpg)
*전문 에이전트가 있는 의료 프로젝트 (내과, 비뇨기과, 심장내과, 가정의학과)*

![액션 패키지](fig3.jpg)
*동적 액션 로딩 - 에이전트는 필요한 액션만 봅니다*

![비즈니스 매니저](fig4.jpg)
*자동 응답 토글과 이웃 관리가 있는 비즈니스 네트워크*

![IndieNet](fig5.jpg)
*Nostr 프로토콜을 통한 탈중앙 통신*

```
IndieBiz OS
├── 의료 프로젝트
│   ├── 김원장 (따뜻한 내과의)
│   ├── 박원장 (꼼꼼한 비뇨기과의)
│   └── 이원장 (가정의학)
│
├── 부동산 프로젝트
│   ├── 세무 상담사 (보수적, 철저)
│   └── 법률 상담사 (사실 중심)
│
└── 창업 프로젝트
    ├── 마케팅 에이전트 (창의적)
    └── 개발 에이전트 (실용적)
```

각 프로젝트는 **완전히 격리**됩니다. 프로젝트를 삭제하면 관련된 모든 것이 깔끔하게 사라집니다.

---

## 핵심 아키텍처: IBL (IndieBiz Logic)

IndieBiz OS는 AI 에이전트와 시스템 사이의 통합 인터페이스로 **IBL**이라는 도메인 특화 언어를 사용합니다. 각 에이전트에게 수백 개의 개별 도구를 주는 대신, 모든 에이전트는 **단일 도구** (`execute_ibl`)와 사용 가능한 노드 및 액션을 설명하는 XML 구조의 환경 프롬프트를 받습니다.

### 6개 노드, ~330개 원자적 액션

```
system    (~65개 액션)  - 시스템 관리, 워크플로우, 파일, 알림, 코드 실행
interface (~79개 액션)  - UI 자동화 (브라우저 / 안드로이드 / macOS 데스크탑)
source    (~100개 액션) - 데이터 검색 (웹, 금융, 사진, 블로그, 기억, 건강)
stream    (~22개 액션)  - 미디어 재생 (유튜브 / 인터넷 라디오)
forge     (~58개 액션)  - 콘텐츠 생성 (슬라이드, 동영상, 차트, 이미지, 음악, 웹사이트)
messenger (~9개 액션)   - 연락처 및 메시징
```

### 작동 방식

```
사용자: "AI 뉴스 검색하고 파일로 저장해"
         ↓
AI 판단: execute_ibl(code='[source:web_search]("AI 뉴스") >> [system:file]("result.md")')
         ↓
IBL 엔진: 파싱 → 핸들러 디스패치 → 결과 반환
```

**핵심 설계 원칙:**
- **하나의 도구, 하나의 언어** - AI 에이전트는 300개 이상의 도구 스키마 대신 하나의 문법만 학습
- **동적 도구 정의** - `execute_ibl` 설명이 `ibl_nodes.yaml`에서 런타임에 생성되어 설치된 패키지를 항상 반영
- **에이전트별 필터링** - 각 에이전트의 `allowed_nodes`가 도구 정의, 시스템 프롬프트, 런타임에 일관되게 적용 (3중 일관성)
- **원자적 액션** - 97%의 액션이 단일 API/DB 호출 (진정한 원자)
- **동사 추상화** - `search`, `get`, `create` 같은 공통 동사가 타입에 따라 특정 액션으로 라우팅
- **두 가지 확장 방법** - IBL 파이프라인을 워크플로우로 저장 (코드 없음) 또는 Python 패키지 작성 (새로운 원자)

### 워크플로우: 재사용 가능한 액션

```yaml
# data/workflows/kinsight.yaml
name: "kinsight"
pipeline: >
  [source:search]("최근 글") {type: "blog", count: 10}
  >> [system:agent_ask_sync]("컨텐츠/컨텐츠") {message: "분석하여 인사이트 보고서를 작성해주세요"}
  >> [system:file]("kinsight_report.html") {format: "html"}
```

이름으로 실행: `[system:run]("kinsight")`

---

## 주요 기능

### 프로젝트 시스템 (무제한 작업공간)

- 필요한 만큼 프로젝트 생성
- 각 프로젝트는 자체 대화 기록, 에이전트, 맥락 보유
- 프로젝트 복사로 변형 버전 생성
- 다른 프로젝트에 영향 없이 삭제

### 에이전트 팀 (위임 체인)

- 프로젝트별로 다른 역할의 여러 에이전트 정의
- 에이전트 간 작업 위임 가능 (비동기 또는 동기)
- 병렬 위임: 하나의 에이전트가 여러 에이전트에게 동시 배포
- 체인을 통한 자동 결과 보고

### 동적 액션 로딩

- agents.yaml의 `allowed_nodes`를 통해 **에이전트별**로 액션 필터링
- `execute_ibl` 도구 정의 자체가 동적으로 생성 — 각 에이전트의 도구 설명에 허용된 노드만 표시
- 수백 개의 액션을 추가해도 단일 에이전트가 압도당하지 않음
- 각 전문가는 필요한 노드만 확인
- 동사 테이블과 액션 카탈로그가 포함된 XML 구조의 환경 프롬프트

### 자기완결적 액션 패키지 (30개 설치됨)

각 패키지는 **자기완결적**입니다: 자체 `ibl_actions.yaml`로 제공하는 IBL 액션을 선언합니다. 패키지 설치 시 해당 액션이 `ibl_nodes.yaml`에 **자동 등록**되고, 제거 시 **자동 해제**됩니다:

- **수동 YAML 편집 불필요** — 패키지 설치만 하면 액션이 즉시 사용 가능
- **깨끗한 제거** — 패키지 제거 시 해당 액션만 정확히 삭제
- **Nostr로 공유 가능** — P2P 네트워크로 패키지 공유, 받는 쪽에서 설치만 하면 작동
- **출처 추적** — `_ibl_provenance.yaml`이 각 액션의 소유 패키지를 추적

| 패키지 | 설명 |
|--------|------|
| android | 안드로이드 기기 관리 (adb) |
| blog | 블로그 RAG 검색 및 인사이트 |
| browser-action | Playwright 기반 브라우저 자동화 (클릭/입력/스크롤/추출) |
| business | 비즈니스 관계 및 연락처(이웃) 관리 |
| cctv | CCTV 모니터링 및 관리 |
| cloudflare | Cloudflare 서비스 (Pages, Workers, R2, D1, Tunnel) |
| computer-use | 컴퓨터 사용 자동화 (화면 캡처, 마우스/키보드 제어) |
| culture | 한국 문화 데이터 (공연, 도서관, 전시회) |
| health-record | 개인 건강 데이터 관리 |
| investment | 글로벌 금융 데이터 (KRX, DART, SEC, Yahoo Finance) |
| kosis | 통계청 데이터 조회 (KOSIS) |
| legal | 대한민국 법률 정보 검색 (법령, 판례, 행정규칙) |
| location-services | 위치 기반 서비스 (날씨, 맛집, 길찾기, 여행 정보) |
| media_producer | HTML 기반 슬라이드(12종 테마), 영상 제작, AI 이미지 생성 |
| music-composer | ABC 악보 기반 작곡, MIDI 생성, 오디오 변환 |
| nodejs | JavaScript/Node.js 실행 |
| pc-manager | 파일 및 저장소 관리, 시스템 분석 |
| photo-manager | 사진 라이브러리 관리 |
| python-exec | Python 코드 실행 |
| radio | 인터넷 라디오 검색 및 재생 (Radio Browser API + 한국 방송사) |
| real-estate | 한국 부동산 데이터 |
| remotion-video | React/Remotion 기반 프로그래밍 방식 동영상 생성 |
| shopping-assistant | 쇼핑 검색 (네이버 쇼핑, 다나와 가격비교) |
| startup | 한국 창업 지원 |
| study | 학습 도우미 및 논문 요약 |
| system_essentials | 파일 관리, todo, 계획 모드, 이웃 조회 |
| visualization | 차트 (라인, 막대, 캔들스틱, 파이, 산점도, 히트맵) |
| web | 웹 검색, 크롤링, 뉴스, 신문 생성, 즐겨찾기 |
| web-builder | 웹사이트 빌더 및 생성 도구 |
| youtube | YouTube 동영상/오디오 관리 |

### 스케줄러, 스위치 & 워크플로우

- **스위치**: 모든 프롬프트 + 에이전트를 재사용 가능한 원클릭 자동화로 저장
- **워크플로우**: IBL 액션을 재사용 가능한 파이프라인으로 연결 (`agent_ask_sync`를 통한 AI 사고 단계 포함)
- **스케줄러**: cron 표현식으로 스위치/워크플로우 자동 실행
- **예시**:
  - 매일 오전 9시 뉴스 요약
  - 블로그 인사이트 보고서 생성
  - 주간 투자 분석

### 원격 접근 (Finder & 런처)

Cloudflare Tunnel로 어디서나 홈 서버를 제어하세요:

**원격 Finder** (`/nas/app`) - 개인 NAS + 음악:
- Finder 스타일 웹 인터페이스로 파일 탐색
- 구간 탐색 지원하는 동영상 스트리밍
- 파일 안전하게 다운로드
- 허용한 디렉토리만 노출
- **음악 스트리밍**: YouTube 검색 후 오디오만 스트리밍

**원격 런처** (`/launcher/app`) - AI 제어:
- 시스템 AI와 원격 채팅
- 스마트폰에서 프로젝트 에이전트 제어
- 스위치 원탭 실행
- 모바일 친화적 다크 테마 UI

```
스마트폰 → Cloudflare Edge → Tunnel → IndieBiz OS
             (HTTPS)        (보안)    (localhost:8765)
                                        ├─ /nas/app (파일 + 음악)
                                        └─ /launcher/app (AI 제어)
```

### 커스텀 웹앱

IndieBiz OS에서 직접 웹앱을 만들고 서비스하세요:

- **인라인 웹앱**: API 엔드포인트가 완전한 HTML/CSS/JS 앱 제공 가능
- **별도 배포 불필요**: 백엔드와 함께 웹앱 실행
- **Cloudflare 연동**: Tunnel로 전세계 노출, 또는 Pages/Workers에 배포
- **AI 생성**: 에이전트가 요청에 따라 웹앱(대시보드, 도구, 게임) 생성

### 비즈니스 네트워크

- **Gmail 연동**: 이메일 수신 및 처리
- **Nostr 연동**: 탈중앙 메시징
- **이웃 관리**: 비즈니스 파트너 추적
- **자동응답 V3**: Tool Use 기반 단일 AI 호출로 판단/검색/발송 통합

### 다중채팅방

- **별도 창**: 각 채팅방이 독립 창에서 열림
- **에이전트 소환**: 모든 프로젝트에서 에이전트를 대화로 초대
- **@지목**: @이름 문법으로 특정 에이전트 호출

### 시스템 AI (메타 컨트롤러)

- 모든 프로젝트 위에서 6개 IBL 노드 전체에 접근
- 시스템 전체 설정 관리
- 시스템 문서를 장기 기억으로 참조
- 모든 프로젝트 에이전트에게 작업 위임 가능

---

## 데이터 주권

**당신의 데이터는 당신의 컴퓨터에 있습니다.**

| 클라우드 AI | IndieBiz OS |
|-------------|-------------|
| 그들 서버에 데이터 | 당신 PC에 데이터 |
| 인터넷 필수 | 오프라인 가능 (Ollama) |
| 플랫폼 종속 | 자유로운 선택 |
| 구독료 | API 호출당 지불 (또는 로컬 LLM으로 무료) |

---

## 아키텍처

```
indiebizOS/
├── backend/              # Python FastAPI (포트 8765)
│   ├── api.py           # 메인 서버 (21개 API 라우터)
│   ├── ibl_engine.py    # IBL 디스패처 (노드/액션 라우팅)
│   ├── ibl_parser.py    # IBL 문법 파서 (파이프라인, 병렬, 폴백)
│   ├── ibl_access.py    # 노드 접근 제어 + XML 환경 빌더
│   ├── ai_agent.py      # 에이전트 코어 (단일 execute_ibl 도구)
│   ├── agent_runner.py  # 위임 체인 실행기
│   ├── tool_loader.py   # 동적 execute_ibl 도구 빌더 + 패키지 로더
│   ├── ibl_action_manager.py # 패키지 설치/제거 시 액션 자동 등록/해제
│   ├── package_manager.py # 패키지 설치/제거 (액션 등록 트리거)
│   ├── workflow_engine.py # 워크플로우 CRUD + 파이프라인 실행기
│   ├── system_ai.py     # 시스템 AI 코어
│   ├── scheduler.py     # 작업 스케줄러
│   ├── auto_response.py # 자동 응답 서비스
│   └── prompt_builder.py # 에이전트 프롬프트 + IBL 환경 주입
│
├── frontend/            # Electron + React (TypeScript)
│   ├── electron/        # 메인/프리로드
│   └── src/             # React 컴포넌트
│
├── data/
│   ├── ibl_nodes.yaml   # IBL 언어 정의 (6개 노드, ~330개 액션, 동사)
│   ├── _ibl_provenance.yaml # 액션 출처 추적 (액션 → 패키지 매핑)
│   ├── packages/        # 액션 패키지 (Python 핸들러)
│   │   ├── installed/   # 활성 패키지 (30개 도구 + 9개 확장)
│   │   │   └── tools/*/ibl_actions.yaml  # 패키지별 액션 선언
│   │   └── not_installed/ # 사용 가능한 패키지
│   ├── workflows/       # 저장된 IBL 워크플로우 (YAML)
│   └── system_docs/     # 시스템 AI 메모리
│
└── projects/            # 사용자 프로젝트 (20개 운영 중)
    └── {project_id}/
        ├── agents.yaml  # 에이전트 정의 (AI 설정, allowed_nodes)
        └── conversations.db # 대화 기록
```

---

## 빠른 시작

### 사전 요구사항

- Python 3.10+
- Node.js 18+
- AI 프로바이더 API 키 (Claude, Gemini 등) 또는 로컬 LLM용 Ollama

### 설치

```bash
# 저장소 클론
git clone https://github.com/kangkukjin/indiebizOS.git
cd indiebizOS

# 백엔드 설정
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# 프론트엔드 설정
cd ../frontend
npm install
```

### 실행

```bash
# 옵션 1: 시작 스크립트 사용
./start.sh

# 옵션 2: 개별 실행
# 터미널 1 - 백엔드
cd backend && python api.py

# 터미널 2 - 프론트엔드
cd frontend && npm run electron:dev
```

### 빌드

```bash
cd frontend

# macOS
npm run prepare:python:mac   # Python 런타임 번들링
npm run electron:build:mac

# Windows
npm run prepare:python:win   # Python 런타임 번들링
npm run electron:build:win
```

**데이터 저장 경로 (프로덕션):**
- macOS: `~/Library/Application Support/IndieBiz/`
- Windows: `%APPDATA%/IndieBiz/`
- 앱 업데이트 시에도 데이터 유지됨

---

## 철학

### 휴먼 인 더 루프 지능

우리는 단일 전지전능 AGI를 믿지 않습니다. 대신:

> **실용적 AI = 전문화된 AI 연합 + 인간 감독**

```
        ┌─────────────────────────────────┐
        │            인간                 │
        │   (연결자, 판단자, 소유자)       │
        └─────────────┬───────────────────┘
                      │
        ┌─────────────┼─────────────┐
        ↓             ↓             ↓
   ┌─────────┐   ┌─────────┐   ┌─────────┐
   │  의료   │   │  금융   │   │  창업   │
   │   팀    │   │   팀    │   │   팀    │
   └─────────┘   └─────────┘   └─────────┘
```

인간은 시스템의 일부입니다:
- 도메인 간 인사이트 연결
- 최종 결정
- 책임 소재
- 윤리적 판단 제공

### 대안과의 비교

| 기능 | Claude Desktop | ChatGPT | IndieBiz OS |
|------|---------------|---------|-------------|
| 커스텀 인격 | 제한적 | 제한적 | **완전 제어** |
| 원클릭 자동화 | 없음 | 없음 | **있음 (스위치 + 워크플로우)** |
| 프로젝트 격리 | 없음 | 없음 | **있음** |
| 통합 액션 언어 | 없음 | 없음 | **있음 (IBL)** |
| 스케줄러 | 없음 | 없음 | **있음** |
| P2P 네트워크 | 없음 | 없음 | **있음 (IndieNet)** |
| 로컬 데이터 | 없음 | 없음 | **있음** |
| 오프라인 가능 | 없음 | 없음 | **있음 (Ollama)** |

---

## 상태

**이 프로젝트는 활발히 개발 중입니다.**

- 20개의 활성 프로젝트 운영 중
- 6개 IBL 노드, ~330개 원자적 액션
- 30개 액션 패키지 + 9개 확장 패키지 설치됨
- `ibl_actions.yaml` 기반 자기완결적 패키지 — 설치/제거 시 액션 자동 등록/해제
- `ibl_nodes.yaml`에서 런타임에 `execute_ibl` 도구 정의 동적 생성
- 에이전트별 노드 필터링: 도구 정의, 시스템 프롬프트, 런타임 3중 일관성
- IBL 워크플로우 엔진 (파이프라인 연산자: >>, &, ??)
- 동기적 에이전트 위임으로 AI 기반 워크플로우 단계 지원
- 최적의 AI 인식을 위한 XML 구조 환경 프롬프트
- Cloudflare Tunnel 연동 원격 Finder + 런처

### 당신의 OS, 당신의 방식

IndieBiz OS는 **각 사용자가 커스터마이즈**하도록 설계되었습니다.

- **포크하고 수정하세요**: 이것은 당신의 개인 운영체제입니다
- **자신만의 액션 추가**: IBL 워크플로우 저장 (코드 없음) 또는 `ibl_actions.yaml` 포함 Python 패키지 작성 (설치 시 자동 등록)
- **Nostr로 패키지 공유**: P2P 네트워크에 패키지 게시, 받는 쪽에서 설치만 하면 즉시 작동
- **자신만의 인격 정의**: 당신의 필요에 맞는 에이전트 구성
- **정해진 구조 없음**: 당신에게 맞는 방식으로 구성

목표는 모두가 같은 방식으로 사용하는 제품이 아니라, 각자의 고유한 필요에 맞게 적응할 수 있는 기반입니다.

기여와 피드백을 환영합니다.

---

## 라이선스

MIT License

---

*IndieBiz OS - 설계하고. 자동화하고. 연결하세요.*
