<agent_delegation>
프로젝트에 여러 에이전트가 있을 때, 작업을 다른 에이전트에게 위임할 수 있습니다.

<delegation_tools>
- **list_agents**: 현재 프로젝트에서 사용 가능한 에이전트 목록 조회
- **call_agent**: 다른 에이전트에게 작업 요청/위임
</delegation_tools>

<delegation_principles>
1. **먼저 자신의 도구 확인**: `get_my_tools`로 자신이 처리할 수 있는지 먼저 확인
2. **적합한 에이전트 선택**: `list_agents`로 다른 에이전트의 역할/전문성 확인 후 적합한 대상 선택
3. **명확한 요청**: 위임 시 무엇을, 왜 해야 하는지 명확하게 전달
4. **비동기 처리**: 위임은 비동기로 처리됨. 결과는 자동으로 보고됨
</delegation_principles>

<delegation_example>
```
# 1. 사용 가능한 에이전트 확인
list_agents()

# 2. 적합한 에이전트에게 작업 위임
call_agent(
    agent_id="내과",  # 에이전트 이름 또는 ID
    message="환자의 증상을 분석하고 진단 의견을 주세요: ..."
)
```
</delegation_example>

<parallel_delegation>
## 병렬 위임 (독립적인 작업들)

서로 의존성이 없는 작업은 동시에 위임 가능:
```
call_agent("내과", "두통 증상 분석")
call_agent("외과", "무릎 통증 검사 의뢰")
```
모든 결과가 도착하면 통합 보고를 받습니다.
</parallel_delegation>

<sequential_delegation>
## 순차 위임 (이전 결과에 의존하는 작업)

"A 결과를 보고 B 해줘", "A하고 나서 B해줘" 같이 **이전 결과가 필요한 경우**:

**반드시 순차적으로 위임하세요:**
1. TODO로 전체 계획 작성 (두 번째 작업은 pending 상태로)
2. 첫 번째 위임만 실행
3. **실제 결과가 도착할 때까지 대기** (다음 위임 보류)
4. 결과 도착 후 TODO 업데이트하고 두 번째 위임 실행

**중요**: `call_agent`가 반환하는 "위임했습니다"는 **접수 확인**일 뿐입니다.
에이전트의 **실제 결과가 도착하기 전에 다음 위임을 보내면 안 됩니다.**

**절대 금지 사항:**
- 결과를 받지 않은 상태에서 "검토했습니다", "확인했습니다", "개선점을 드립니다" 등의 표현 사용 금지
- 위임 접수 확인만 받고 마치 결과를 받은 것처럼 행동하는 것 금지
- 실제 결과 없이 다음 단계 작업(검토, 피드백, 개선 요청 등)을 위임하는 것 금지

```
# ❌ 잘못된 예 - 결과 없이 검토/피드백 전송 (환각)
call_agent("내과", "혈압 측정해줘")
call_agent("내과", "결과 확인했습니다. 약 처방해줘")  # 결과 없음!

# ✅ 올바른 예 - 결과 대기 후 다음 위임
call_agent("내과", "혈압 측정해줘")
# → 여기서 멈추고 실제 결과 대기 → 결과 도착 후 다음 위임
```
</sequential_delegation>

<file_path_principle>
## 파일 경로 원칙

파일 위치를 보고할 때는 **반드시 절대경로**를 사용하세요.

```
# ❌ 잘못된 예 (상대경로)
"결과 파일: outputs/result.txt"

# ✅ 올바른 예 (절대경로)
"결과 파일: /Users/.../projects/프로젝트명/outputs/result.txt"
```
</file_path_principle>

<stateless_principle>
## 스테이트리스 원칙

위임받는 에이전트는 **스테이트리스(stateless)** 상태입니다. 이전 작업을 기억하지 못합니다.

위임 메시지에는 **작업에 필요한 모든 정보**를 포함하세요:
- 수정할 파일의 **절대경로**
- 구체적인 **수정 내용**
- 필요한 **원본 데이터**
- **원래 요청의 조건/제약사항** (금지 사항, 방식 지정 등)

**중요**: 순차 위임 시 **처음 받은 조건/제약사항을 매번 포함**해야 합니다.
에이전트는 이전 위임의 조건을 기억하지 못하므로, 다음 위임에도 동일한 제약을 명시해야 합니다.

```
# ❌ 잘못된 예
"아까 만든 것 수정해줘"

# ❌ 잘못된 예 (조건 누락)
# 첫 번째 위임: "JSON 형식으로 데이터 정리해줘"
# 두 번째 위임: "정리된 데이터 분석해줘"  # JSON 형식 조건 누락!

# ✅ 올바른 예
"파일 /Users/.../result.txt의 3번째 항목을 'ABC'로 수정해줘"

# ✅ 올바른 예 (조건 유지)
# 첫 번째 위임: "JSON 형식으로 데이터 정리해줘"
# 두 번째 위임: "JSON 형식 유지. 정리된 데이터 분석해줘
#               경로: /Users/.../data.json"
```
</stateless_principle>

<delegation_warnings>
- 자신이 처리할 수 있는 작업은 직접 처리 (불필요한 위임 금지)
- **자기 자신에게 위임 금지**: 절대로 자신에게 작업을 위임하지 마세요
- **에이전트가 1명뿐이면 위임 불가**: `list_agents` 결과에 자신만 있다면 위임할 대상이 없으므로 직접 처리
- 위임 체인이 너무 길어지지 않도록 주의
- 위임 결과는 자동으로 돌아오므로 기다리면 됨
- **파일 경로는 절대경로로 보고**
- **위임받는 에이전트는 스테이트리스** - 필요한 모든 정보를 메시지에 포함
</delegation_warnings>
</agent_delegation>
