# Real Estate 도구 가이드

## 도구 선택 가이드

| 목적 | 도구 | 설명 |
|------|------|------|
| 아파트 매매 | `apt_trade_price` | 아파트 매매 실거래가 조회 |
| 아파트 전월세 | `apt_rent_price` | 아파트 전세/월세 실거래가 조회 |
| 단독/다가구 매매 | `house_trade_price` | 단독/다가구 매매 실거래가 조회 |
| 단독/다가구 전월세 | `house_rent_price` | 단독/다가구 전세/월세 실거래가 조회 |
| 지역코드 | `get_region_codes` | 법정동 지역코드 확인 |
| 상권 분석 | `search_commercial_district` | 상권/업종 정보 조회 |

---

## 기본 워크플로우

```
1. get_region_codes로 지역코드 확인
   - 예: "강남구" → 11680

2. 원하는 데이터 조회
   - apt_trade_price(지역코드, 기간) → 아파트 매매 실거래가
   - apt_rent_price(지역코드, 기간) → 아파트 전월세 실거래가
   - house_trade_price(지역코드, 기간) → 단독/다가구 매매
   - house_rent_price(지역코드, 기간) → 단독/다가구 전월세
```

---

## 데이터 이해

- **단위**: 만원
  - 64,000 = 6억 4천만원
  - 30,000 = 3억원
  - 5,000 = 5천만원
- **반환량**: 한 번 호출로 최대 12개월 데이터 반환

---

## 주요 지역 코드

| 지역 | 코드 |
|------|------|
| 강남구 | 11680 |
| 서초구 | 11650 |
| 송파구 | 11710 |

정확한 코드는 `get_region_codes`로 확인할 것.

---

## 매물 분석 판단 기준

### 다세대(빌라) / 오피스텔 — 개별 호실
- **단가 분석**: 전용면적당 단가(평당가)를 산출하여 인근 유사 매물과 비교
- **전세가율**: 매매가 대비 전세가 비중. 80% 이상이면 깡통전세 리스크 진단
- **126% 룰 (HUG 보증보험)**: `주택공시가격 × 1.26` 기준으로 전세보증금 반환보증 가입 가능 여부 판단

### 다가구 / 상가주택 — 건물 통매매
- **수익률**: `(월세 합계 × 12) / (매매가 - 보증금 합계 - 대출금)` = 실투자금 대비 수익률
- **권리관계**: 근저당권 설정액 + 선순위 임차인 보증금 합계가 건물 가액의 70~80% 초과 시 위험
- **공실 리스크**: 인근 기업/대학, 교통망 확충 계획으로 임대 수요 예측

### 시장 판단
- **상승/하락 신호**: 실거래가 대비 호가 상승 여부, 매물 적체량(증감)
- **입지 평가**: `search_commercial_district`로 주변 상권 활성도와 편의시설 접근성 수치화

---

## 전세가율 계산

전세가율을 구하려면 매매가와 전세가를 함께 조회해야 한다.

```
1. apt_trade_price로 매매 실거래가 조회
2. apt_rent_price로 전세 실거래가 조회
3. 전세가율 = (전세가 / 매매가) x 100
```

---

## search_commercial_district (상권 분석)

### 검색 방식

- **위경도로 검색**: 좌표 기반으로 주변 상권 조회
- **행정동코드로 검색**: 특정 행정동의 상권 조회

### 업종코드

| 코드 | 업종 |
|------|------|
| I | 음식 |
| Q | 숙박 |
| R | 학문/교육 |
| S | 소매 |
| T | 생활서비스 |
| U | 의료 |
| V | 부동산 |
| W | 관광/여가/오락 |

### 지도 시각화 연계

`search_commercial_district` 결과를 `show_location_map` (location-services 패키지)의 `markers`로 전달하면 상권 데이터를 지도 위에 시각화할 수 있다.

```
1. search_commercial_district로 상권 데이터 조회
2. 결과에서 좌표/상호 정보 추출
3. show_location_map의 markers 파라미터로 전달
4. 지도 위에 상권 분포 시각화
```
