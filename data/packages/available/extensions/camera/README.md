# Camera 확장

## 목적

모든 AI 에이전트가 카메라를 통해 이미지 입력을 받을 수 있게 합니다.
설치 후 사용자는 채팅 중 카메라 버튼을 눌러 사진을 찍고, AI에게 "이게 뭐야?"라고 물을 수 있습니다.

## 이 확장이 제공하는 것

- **실시간 카메라 입력**: 웹캠으로 사진을 찍어 AI에게 전송
- **모든 에이전트에 적용**: 개별 에이전트 설정 없이 시스템 전체에서 활성화
- **멀티모달 AI 지원**: 이미지를 이해하는 AI 모델과 연동

## 설치 시 필요한 변경사항

### 1. 프론트엔드 (UI)

채팅 입력창에 카메라 버튼을 추가해야 합니다.

- 텍스트 입력창 옆에 카메라 아이콘 버튼
- 클릭 시:
  - 웹캠 미리보기 표시
  - 촬영 버튼으로 사진 캡처
  - 또는 파일 선택으로 기존 이미지 첨부
- 캡처된 이미지는 메시지에 첨부되어 함께 전송

### 2. 백엔드 (AI 통신)

이미지 데이터를 AI에게 전달하는 로직이 필요합니다.

- 메시지에 이미지가 첨부된 경우 감지
- 이미지를 base64로 인코딩
- AI API 호출 시 멀티모달 형식으로 전송
  - Anthropic: content 배열에 image 블록 추가
  - OpenAI: content 배열에 image_url 추가
  - Gemini: parts에 이미지 추가

### 3. 모델 호환성 처리

모든 AI 모델이 이미지를 지원하지는 않습니다.

- 이미지 지원 모델인지 확인
- 지원하지 않는 모델이면 사용자에게 안내:
  "현재 모델은 이미지 분석을 지원하지 않습니다"
- 또는 이미지 첨부 버튼 자체를 비활성화

### 4. 카메라 접근

운영체제별로 카메라 접근 방식이 다릅니다.

- **웹 브라우저/Electron**: navigator.mediaDevices.getUserMedia()
- **Python 백엔드**: opencv-python (cv2.VideoCapture)
- **권한 요청**: 사용자에게 카메라 접근 권한 요청 필요
- **macOS**: 시스템 설정에서 카메라 권한 허용 필요

## 참고 구현

이 폴더의 `tool_camera.py`는 Python + OpenCV를 사용한 구현 예시입니다.

```
tool_camera.py
├── list_cameras()      - 사용 가능한 카메라 목록
├── capture_image()     - 사진 촬영 및 저장
└── capture_for_ai()    - AI 분석용 base64 이미지 반환
```

이 코드를 그대로 사용하지 말고, 현재 시스템의 구조에 맞게 구현하세요.
예를 들어:
- 프론트엔드가 React면 React 컴포넌트로 카메라 미리보기 구현
- 백엔드가 Node.js면 적절한 라이브러리 사용
- Electron 앱이면 desktopCapturer API 활용 가능

## 의존성 (참고용)

Python 구현의 경우:
```bash
pip install opencv-python
```

웹 구현의 경우:
- 브라우저 내장 MediaDevices API 사용 (추가 설치 불필요)

## 설치 완료 확인

- [ ] 채팅 입력창에 카메라 버튼이 보임
- [ ] 버튼 클릭 시 카메라 미리보기 또는 파일 선택 가능
- [ ] 촬영한 이미지가 메시지와 함께 AI에게 전송됨
- [ ] AI가 이미지 내용에 대해 응답함
