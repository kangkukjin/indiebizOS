# 프롬프트 생성기 확장

## 목적

에이전트 팀의 프롬프트를 AI로 자동 생성합니다.
프로젝트 목적과 에이전트 구성을 입력하면, 각 에이전트의 역할 프롬프트와 공통 설정을 생성합니다.

## 이 확장이 제공하는 것

- **자동 프롬프트 생성**: 프로젝트 설명만으로 전체 팀 프롬프트 생성
- **협업 규칙 포함**: call_agent 사용법, 위임 체인 등 자동 포함
- **일관성 보장**: 에이전트 간 협업이 잘 되도록 규격화된 프롬프트
- **검증**: 필수 요소가 빠졌는지 자동 확인

## 설치 시 필요한 변경사항

### 1. 프롬프트 생성 로직

AI를 사용해 프롬프트를 생성하는 로직이 필요합니다.

**입력:**
- 프로젝트 목적 (예: "IT 뉴스레터 발행팀")
- 에이전트 목록 (이름, 역할, 타입)
- AI 설정 (프로바이더, 모델, API 키)

**출력:**
- 공통 설정 (common_settings.txt)
- 에이전트별 역할 (agent_{name}_role.txt)

### 2. 필수 규격

생성된 프롬프트에 반드시 포함되어야 할 내용:

**공통 설정:**
```
- call_agent(agent_name, message) 사용법
- 위임 체인 시스템 설명
- 파일 경로 규칙
- 에러 처리 방법
```

**개별 역할:**
```
- 구체적인 역할 설명
- 협업 대상 에이전트 명시
- 언제 누구에게 위임할지 가이드
```

**코딩 에이전트 추가 규칙:**
```
- 금지 명령어 (rm -rf 등)
- 코드 실행 전 체크리스트
- 에러 디버깅 절차
```

### 3. 검증 시스템

생성된 프롬프트가 규격을 만족하는지 확인해야 합니다.

검증 항목:
- call_agent 사용법이 포함되었는가?
- 각 에이전트가 다른 에이전트를 알고 있는가?
- 위임 조건이 명시되었는가?

검증 실패 시:
- 누락된 부분 식별
- 자동 수정 시도 (최대 2회)
- 수정 실패 시 사용자에게 알림

### 4. Few-shot 예시

좋은 프롬프트를 생성하려면 예시가 필요합니다.

- 잘 작성된 프롬프트 예시 몇 개를 저장
- AI에게 예시와 함께 새 프롬프트 생성 요청
- 예시의 스타일과 구조를 따르도록

### 5. 프로젝트 저장

생성된 프롬프트를 프로젝트에 저장해야 합니다.

저장 위치:
```
project_001/
├── common_settings.txt
├── agent_집사_role.txt
├── agent_대장장이_role.txt
└── rules.json
```

### 6. UI 통합

프롬프트 생성을 요청하는 인터페이스가 필요합니다.

- 프로젝트 설정 화면에서 "프롬프트 자동 생성" 버튼
- 생성 중 로딩 표시
- 생성된 프롬프트 미리보기
- 수정 후 저장 가능

## 설계 고려사항

### 토큰 최적화
- 너무 긴 프롬프트는 비용 증가
- 선택적으로 압축 단계 추가
- 단, 압축 시 정보 손실 주의

### 모델 선택
- 프롬프트 생성에는 고품질 모델 권장
- 비용 vs 품질 트레이드오프

### 버전 관리
- 프롬프트 변경 이력 저장 (선택)
- 이전 버전으로 롤백 가능

## 참고 구현

이 폴더의 `prompt_generator.py`는 Few-shot 기반 생성 예시입니다.

```
prompt_generator.py
├── _step1_generate_draft()  - AI로 초안 생성
├── _step2_validate()        - 규격 검증
├── _step3_compress()        - 토큰 최적화 (선택)
├── _step4_test()            - 시뮬레이션 검증 (선택)
└── save_to_project()        - 프로젝트에 저장
```

### 의존성 (Python 구현)
```bash
pip install google-generativeai  # Gemini
# 또는
pip install anthropic            # Claude
pip install openai               # OpenAI
```

이 코드를 그대로 사용하지 말고, 현재 시스템에 맞게 구현하세요.

## 설치 완료 확인

- [ ] 프로젝트 목적과 에이전트 목록으로 프롬프트 생성 가능
- [ ] 생성된 프롬프트에 call_agent 사용법 포함됨
- [ ] 각 에이전트가 협업 대상을 알고 있음
- [ ] 프롬프트가 프로젝트 폴더에 저장됨
- [ ] UI에서 생성 요청 가능
