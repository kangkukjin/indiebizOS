{
  "id": "browser-action",
  "name": "Browser Action",
  "description": "Playwright 기반 브라우저 자동화. Accessibility Snapshot + ref 타겟팅, 다중 탭, iframe, 쿠키 관리 지원.",
  "version": "3.0.0",
  "tools": [
    {
      "name": "browser_navigate",
      "description": "브라우저를 열고 URL로 이동합니다. 이동 후 browser_snapshot으로 페이지 구조를 파악하세요.",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "이동할 URL (https:// 생략 가능)"
          },
          "headless": {
            "type": "boolean",
            "default": true,
            "description": "헤드리스 모드"
          },
          "wait_for": {
            "type": "string",
            "enum": [
              "load",
              "domcontentloaded",
              "networkidle"
            ],
            "default": "load",
            "description": "페이지 로드 대기 조건"
          }
        },
        "required": [
          "url"
        ]
      }
    },
    {
      "name": "browser_navigate_back",
      "description": "브라우저 히스토리 이전 페이지로 이동합니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_navigate_forward",
      "description": "브라우저 히스토리 다음 페이지로 이동합니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_snapshot",
      "description": "현재 페이지의 Accessibility Snapshot을 캡처합니다. 각 요소에 ref(e1, e2...)가 부여되며, 이 ref를 browser_click/type 등에서 사용합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "selector": {
            "type": "string",
            "description": "특정 영역만 스냅샷할 CSS 선택자"
          }
        }
      }
    },
    {
      "name": "browser_click",
      "description": "ref 기반으로 요소를 클릭합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "element": {
            "type": "string",
            "description": "클릭할 요소 설명"
          },
          "ref": {
            "type": "string",
            "description": "browser_snapshot에서 얻은 ref (예: e1)"
          }
        },
        "required": [
          "element",
          "ref"
        ]
      }
    },
    {
      "name": "browser_type",
      "description": "ref 기반으로 입력 필드에 텍스트를 입력합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "element": {
            "type": "string",
            "description": "입력 필드 설명"
          },
          "ref": {
            "type": "string",
            "description": "browser_snapshot에서 얻은 ref"
          },
          "text": {
            "type": "string",
            "description": "입력할 텍스트"
          },
          "submit": {
            "type": "boolean",
            "default": false,
            "description": "입력 후 Enter 전송"
          },
          "clear": {
            "type": "boolean",
            "default": true,
            "description": "기존 내용 삭제 후 입력"
          }
        },
        "required": [
          "element",
          "ref",
          "text"
        ]
      }
    },
    {
      "name": "browser_select_option",
      "description": "드롭다운(select)에서 옵션을 선택합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "element": {
            "type": "string",
            "description": "select 요소 설명"
          },
          "ref": {
            "type": "string",
            "description": "browser_snapshot에서 얻은 ref"
          },
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "선택할 옵션 값 배열"
          }
        },
        "required": [
          "element",
          "ref",
          "values"
        ]
      }
    },
    {
      "name": "browser_hover",
      "description": "요소 위에 마우스를 올립니다(hover).",
      "input_schema": {
        "type": "object",
        "properties": {
          "element": {
            "type": "string",
            "description": "hover할 요소 설명"
          },
          "ref": {
            "type": "string",
            "description": "browser_snapshot에서 얻은 ref"
          }
        },
        "required": [
          "element",
          "ref"
        ]
      }
    },
    {
      "name": "browser_drag",
      "description": "요소를 드래그하여 다른 위치로 이동합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "source_element": {
            "type": "string",
            "description": "드래그할 요소 설명"
          },
          "source_ref": {
            "type": "string",
            "description": "소스 요소의 ref"
          },
          "target_element": {
            "type": "string",
            "description": "드롭할 위치 요소 설명"
          },
          "target_ref": {
            "type": "string",
            "description": "타겟 요소의 ref"
          }
        },
        "required": [
          "source_element",
          "source_ref",
          "target_element",
          "target_ref"
        ]
      }
    },
    {
      "name": "browser_press_key",
      "description": "키보드 키를 누릅니다. (예: Enter, Tab, Control+a)",
      "input_schema": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "누를 키 (예: Enter, Tab, Control+a)"
          }
        },
        "required": [
          "key"
        ]
      }
    },
    {
      "name": "browser_scroll",
      "description": "페이지를 스크롤합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "direction": {
            "type": "string",
            "enum": [
              "down",
              "up"
            ],
            "default": "down",
            "description": "스크롤 방향"
          },
          "amount": {
            "type": "integer",
            "default": 500,
            "description": "스크롤량 (px)"
          },
          "to_bottom": {
            "type": "boolean",
            "default": false,
            "description": "페이지 맨 아래로"
          },
          "to_top": {
            "type": "boolean",
            "default": false,
            "description": "페이지 맨 위로"
          }
        }
      }
    },
    {
      "name": "browser_wait_for",
      "description": "특정 조건(selector, text, url, timeout)이 충족될 때까지 대기합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "selector": {
            "type": "string",
            "description": "대기할 CSS 선택자"
          },
          "text": {
            "type": "string",
            "description": "대기할 텍스트"
          },
          "url": {
            "type": "string",
            "description": "대기할 URL 패턴 (정규식)"
          },
          "timeout": {
            "type": "integer",
            "default": 30000,
            "description": "최대 대기 시간 (ms)"
          }
        }
      }
    },
    {
      "name": "browser_screenshot",
      "description": "현재 페이지의 스크린샷을 PNG로 저장합니다. 시각적 확인 필요 시에만 사용.",
      "input_schema": {
        "type": "object",
        "properties": {
          "full_page": {
            "type": "boolean",
            "default": false,
            "description": "전체 페이지 캡처"
          },
          "selector": {
            "type": "string",
            "description": "특정 요소만 캡처할 CSS 선택자"
          }
        }
      }
    },
    {
      "name": "browser_get_content",
      "description": "현재 페이지의 텍스트 내용을 추출합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "selector": {
            "type": "string",
            "description": "특정 영역만 추출할 CSS 선택자"
          },
          "max_length": {
            "type": "integer",
            "default": 10000,
            "description": "최대 텍스트 길이"
          }
        }
      }
    },
    {
      "name": "browser_console_logs",
      "description": "브라우저 콘솔 로그를 조회합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "all",
              "log",
              "error",
              "warning",
              "info"
            ],
            "default": "all",
            "description": "로그 타입 필터"
          },
          "search": {
            "type": "string",
            "description": "검색 텍스트"
          },
          "limit": {
            "type": "integer",
            "default": 100,
            "description": "최대 로그 수"
          },
          "clear": {
            "type": "boolean",
            "default": false,
            "description": "조회 후 삭제"
          }
        }
      }
    },
    {
      "name": "browser_save_pdf",
      "description": "현재 페이지를 PDF 파일로 저장합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "format": {
            "type": "string",
            "enum": [
              "A4",
              "Letter",
              "Legal",
              "A3"
            ],
            "default": "A4",
            "description": "용지 크기"
          },
          "landscape": {
            "type": "boolean",
            "default": false,
            "description": "가로 방향"
          },
          "print_background": {
            "type": "boolean",
            "default": true,
            "description": "배경 인쇄"
          }
        }
      }
    },
    {
      "name": "browser_evaluate",
      "description": "현재 페이지에서 JavaScript를 실행합니다. 반환값은 JSON 직렬화 가능해야 합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "실행할 JavaScript 표현식"
          }
        },
        "required": [
          "expression"
        ]
      }
    },
    {
      "name": "browser_close",
      "description": "브라우저 세션을 종료합니다. 120초 비활성 시 자동 종료됨.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_tab_list",
      "description": "현재 열린 모든 탭의 목록(tab_id, title, url, active)을 반환합니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_tab_new",
      "description": "새 탭을 열고 선택적으로 URL로 이동합니다. 자동으로 활성 탭이 됩니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "이동할 URL (비워두면 빈 탭)"
          }
        }
      }
    },
    {
      "name": "browser_tab_switch",
      "description": "지정한 탭으로 전환합니다. 전환 후 browser_snapshot을 호출하세요.",
      "input_schema": {
        "type": "object",
        "properties": {
          "tab_id": {
            "type": "string",
            "description": "전환할 탭 ID (예: t1, t2)"
          }
        },
        "required": [
          "tab_id"
        ]
      }
    },
    {
      "name": "browser_tab_close",
      "description": "지정한 탭을 닫습니다. 활성 탭이면 다른 탭으로 자동 전환됩니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "tab_id": {
            "type": "string",
            "description": "닫을 탭 ID (비워두면 현재 탭)"
          }
        }
      }
    },
    {
      "name": "browser_iframe_list",
      "description": "현재 페이지의 iframe 목록(index, name, url)을 반환합니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_iframe_switch",
      "description": "지정한 iframe 내부로 전환합니다. 이후 snapshot/click 등이 iframe 내에서 동작합니다.",
      "input_schema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "iframe name 속성"
          },
          "index": {
            "type": "integer",
            "description": "iframe 인덱스"
          },
          "url": {
            "type": "string",
            "description": "iframe URL 패턴 (부분 일치)"
          }
        }
      }
    },
    {
      "name": "browser_iframe_reset",
      "description": "iframe에서 메인 페이지로 돌아갑니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "browser_cookies_save",
      "description": "현재 브라우저의 쿠키와 localStorage를 파일로 저장합니다. 로그인 상태 유지용.",
      "input_schema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "저장 이름 (비워두면 도메인명 사용)"
          }
        }
      }
    },
    {
      "name": "browser_cookies_load",
      "description": "저장된 쿠키와 localStorage를 복원합니다. 로그인 상태 복원용.",
      "input_schema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "복원할 저장 이름"
          }
        },
        "required": [
          "name"
        ]
      }
    }
  ]
}
