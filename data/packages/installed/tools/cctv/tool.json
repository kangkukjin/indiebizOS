{
  "id": "cctv",
  "name": "CCTV 실시간 영상",
  "description": "CCTV 및 실시간 웹캠 통합 도구\n\n## 소스\n- ITS 국가교통정보센터 (한국 교통 CCTV)\n- Windy Webcams (전세계 웹캠)\n- 해양수산부 연안 CCTV (한국 해안/해변)\n- 국립공원 CCTV (한국 국립공원)\n\n## 주요 기능\n- 위치/키워드 기반 CCTV 검색\n- 가장 가까운 CCTV 찾기\n- 실시간 영상 URL 제공\n- 화면 캡처 (AI 분석용)\n\n## 필요 환경변수\n- ITS_API_KEY: 국가교통정보센터 API 키\n- WINDY_API_KEY: Windy Webcams API 키 (선택)",
  "version": "2.0.0",
  "guide_file": "cctv_guide.md",
  "tools": [
    {
      "name": "search_cctv",
      "description": "ITS 국가교통정보센터 - 지정한 영역 내의 교통 CCTV 목록을 조회합니다.\n\n## 사용 예시\n- search_cctv(min_x=126.8, max_x=127.2, min_y=37.4, max_y=37.7)\n- search_cctv(..., road_type='ex')  # 고속도로만\n\n## 도로 유형\n- 'ex': 고속도로\n- 'its': 국도\n- 'all': 전체 (기본값)",
      "input_schema": {
        "type": "object",
        "properties": {
          "min_x": {"type": "number", "description": "최소 경도 (예: 126.8)"},
          "max_x": {"type": "number", "description": "최대 경도 (예: 127.2)"},
          "min_y": {"type": "number", "description": "최소 위도 (예: 37.4)"},
          "max_y": {"type": "number", "description": "최대 위도 (예: 37.7)"},
          "road_type": {"type": "string", "enum": ["ex", "its", "all"], "description": "도로 유형"}
        },
        "required": ["min_x", "max_x", "min_y", "max_y"]
      }
    },
    {
      "name": "get_nearby_cctv",
      "description": "ITS 국가교통정보센터 - 특정 좌표에서 가장 가까운 교통 CCTV를 찾습니다.\n\n## 사용 예시\n- get_nearby_cctv(lat=37.5665, lng=126.9780)  # 서울시청 근처\n- get_nearby_cctv(lat=35.1796, lng=129.0756, count=5)  # 부산역 근처 5개",
      "input_schema": {
        "type": "object",
        "properties": {
          "lat": {"type": "number", "description": "위도"},
          "lng": {"type": "number", "description": "경도"},
          "radius": {"type": "number", "description": "검색 반경 (도 단위, 기본값 0.1 = 약 10km)"},
          "count": {"type": "integer", "description": "반환할 CCTV 수 (기본값 1)"},
          "road_type": {"type": "string", "enum": ["ex", "its", "all"], "description": "도로 유형"}
        },
        "required": ["lat", "lng"]
      }
    },
    {
      "name": "get_cctv_by_name",
      "description": "ITS 국가교통정보센터 - CCTV 이름으로 검색합니다.\n\n## 사용 예시\n- get_cctv_by_name(keyword='경부')  # 경부고속도로 CCTV\n- get_cctv_by_name(keyword='강남')  # 강남 포함된 CCTV",
      "input_schema": {
        "type": "object",
        "properties": {
          "keyword": {"type": "string", "description": "검색 키워드"},
          "road_type": {"type": "string", "enum": ["ex", "its", "all"], "description": "도로 유형"},
          "limit": {"type": "integer", "description": "최대 결과 수 (기본값 10)"}
        },
        "required": ["keyword"]
      }
    },
    {
      "name": "open_cctv",
      "description": "교통 CCTV 영상을 브라우저에서 엽니다.\n\n## 사용 방법 (택1)\n- url: CCTV URL 직접 지정\n- name: 이름으로 검색하여 열기\n- lat/lng: 좌표 근처 CCTV 열기",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {"type": "string", "description": "CCTV 영상 URL (직접 지정)"},
          "name": {"type": "string", "description": "CCTV 이름 키워드"},
          "lat": {"type": "number", "description": "위도"},
          "lng": {"type": "number", "description": "경도"}
        }
      }
    },
    {
      "name": "search_webcam",
      "description": "Windy Webcams API - 전세계 실시간 웹캠을 검색합니다.\n\n## 카테고리 (18종)\nairport, beach, building, city, coast, forest, indoor, lake, landscape, meteo, mountain, observatory, port, river, sportArea, square, traffic, village\n\n## 사용 예시\n- search_webcam(lat=37.5665, lon=126.9780, radius_km=50)  # 서울 주변\n- search_webcam(category='beach', country='KR')  # 한국 해변 웹캠\n- search_webcam(category='mountain', country='JP')  # 일본 산 웹캠\n\n## 필요 환경변수: WINDY_API_KEY",
      "input_schema": {
        "type": "object",
        "properties": {
          "lat": {"type": "number", "description": "위도 (근처 검색 시)"},
          "lon": {"type": "number", "description": "경도 (근처 검색 시)"},
          "radius_km": {"type": "number", "description": "검색 반경 km (기본 50, 최대 250)"},
          "category": {"type": "string", "description": "카테고리 (beach, mountain, city 등)"},
          "country": {"type": "string", "description": "국가 코드 (KR, JP, US 등)"},
          "limit": {"type": "integer", "description": "최대 결과 수 (기본 10, 최대 50)"}
        }
      }
    },
    {
      "name": "get_nearby_webcam",
      "description": "Windy Webcams API - 특정 좌표에서 가장 가까운 웹캠을 찾습니다 (전세계).\n\n## 사용 예시\n- get_nearby_webcam(lat=37.5665, lon=126.9780)  # 서울시청 근처\n- get_nearby_webcam(lat=48.8566, lon=2.3522, count=5)  # 파리 근처 5개\n\n## 필요 환경변수: WINDY_API_KEY",
      "input_schema": {
        "type": "object",
        "properties": {
          "lat": {"type": "number", "description": "위도"},
          "lon": {"type": "number", "description": "경도"},
          "radius_km": {"type": "number", "description": "검색 반경 km (기본 50)"},
          "count": {"type": "integer", "description": "반환할 웹캠 수 (기본 3)"}
        },
        "required": ["lat", "lon"]
      }
    },
    {
      "name": "search_coastal_cctv",
      "description": "해양수산부 연안 CCTV - 전국 해수욕장 및 해안 CCTV를 검색합니다.\n\n## 사용 예시\n- search_coastal_cctv()  # 전체 목록\n- search_coastal_cctv(keyword='해운대')\n- search_coastal_cctv(region='제주')\n\n## 참고\n- 스크래핑 기반으로 일부 URL이 변경될 수 있습니다\n- 약 20개소 해변/해안 CCTV 제공",
      "input_schema": {
        "type": "object",
        "properties": {
          "region": {"type": "string", "description": "지역명 필터 (예: 부산, 제주, 강원)"},
          "keyword": {"type": "string", "description": "검색 키워드"}
        }
      }
    },
    {
      "name": "search_park_cctv",
      "description": "국립공원 실시간 CCTV - 전국 17개 국립공원 CCTV를 검색합니다.\n\n## 국립공원 목록\n지리산, 계룡산, 설악산, 속리산, 내장산, 가야산, 덕유산, 오대산, 주왕산, 치악산, 월악산, 북한산, 소백산, 월출산, 무등산, 태백산, 한라산\n\n## 사용 예시\n- search_park_cctv(park_name='설악산')\n- search_park_cctv(keyword='봉')\n- search_park_cctv()  # 전체\n\n## 참고\n- 기상/통신 상황에 따라 영상 중단 가능",
      "input_schema": {
        "type": "object",
        "properties": {
          "park_name": {"type": "string", "description": "국립공원 이름 (예: 설악산, 한라산)"},
          "keyword": {"type": "string", "description": "검색 키워드 (CCTV 이름 내)"}
        }
      }
    },
    {
      "name": "capture_cctv",
      "description": "CCTV/웹캠 영상에서 현재 프레임을 캡처하여 이미지로 저장합니다.\nAI가 CCTV 화면의 실시간 상황을 분석할 때 사용합니다.\n\n## 지원 형식\n- HLS 스트림 (m3u8): ffmpeg으로 프레임 캡처\n- 이미지 URL (jpg/png): 직접 다운로드\n- auto: URL 패턴으로 자동 판별\n\n## 사용 예시\n- capture_cctv(url='https://...playlist.m3u8')  # HLS 스트림\n- capture_cctv(url='https://images-webcams.windy.com/...')  # 웹캠 이미지\n- capture_cctv(url='...', source_type='hls')  # 타입 명시\n\n## 반환값\n- file_path: 저장된 이미지 파일 경로 (AI가 이 파일을 읽어 분석)\n- capture_method: 사용된 캡처 방법\n\n## 의존성\n- ffmpeg 필요 (HLS 캡처용, brew install ffmpeg)",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {"type": "string", "description": "CCTV 영상/이미지 URL"},
          "source_type": {
            "type": "string",
            "enum": ["auto", "hls", "image"],
            "description": "소스 타입 (기본 auto: URL로 자동 판별)"
          },
          "filename": {"type": "string", "description": "저장 파일명 (기본: cctv_capture_타임스탬프.jpg)"}
        },
        "required": ["url"]
      }
    },
    {
      "name": "list_cctv_sources",
      "description": "사용 가능한 모든 CCTV/웹캠 소스와 현재 상태를 확인합니다.\n각 소스의 API 키 설정 여부, 도구 목록, 커버리지 정보를 반환합니다.\nffmpeg 설치 여부도 확인합니다.",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    }
  ]
}
