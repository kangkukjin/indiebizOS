{
  "id": "web-collector",
  "name": "Web Collector",
  "description": "웹 정보 수집 가이드 + DB 프레임워크. 사이트별 가이드(어디서 뭘 어떻게 찾고, 어떤 형식으로 저장할지)를 관리하고, AI가 browser-action으로 수집한 데이터를 DB에 저장/조회합니다.",
  "version": "2.0.0",
  "tools": [
    {
      "name": "wc_sites",
      "description": "사이트 가이드를 관리합니다.\n\naction별 동작:\n- list: 등록된 사이트 목록 (이름, URL, 필드 정보)\n- info: 사이트 상세 가이드 반환 (검색 방법, 필드 매핑, 데이터 해석법). browser-action으로 탐색하기 전에 반드시 호출하여 가이드를 확인하세요.\n- register: 새 사이트 가이드 등록 (guide_code에 SITE_CONFIG dict 전달)\n\n새 사이트 추가: register를 guide_code 없이 호출하면 템플릿 반환.",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "list",
              "info",
              "register"
            ],
            "description": "작업 유형 (기본: list)"
          },
          "site_id": {
            "type": "string",
            "description": "사이트 ID (action=info 시 필수)"
          },
          "guide_code": {
            "type": "string",
            "description": "사이트 가이드 Python 코드 (action=register 시). SITE_CONFIG dict 필수."
          }
        }
      }
    },
    {
      "name": "wc_save",
      "description": "AI가 browser-action으로 수집한 데이터를 DB에 저장합니다.\n\n사용 흐름:\n1. wc_sites(action='info')로 사이트 가이드 확인 (필드 정의, key_field)\n2. browser-action 도구로 사이트 탐색하여 데이터 수집\n3. 가이드의 fields 정의에 맞게 데이터를 구조화\n4. wc_save로 DB에 저장 (key_field 기준 중복 자동 제거)\n\n반환: {success, site_id, new, updated, total}",
      "input_schema": {
        "type": "object",
        "properties": {
          "site_id": {
            "type": "string",
            "description": "사이트 ID (wc_sites에 등록된 ID)"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "저장할 데이터 목록. 각 dict는 SITE_CONFIG.fields에 정의된 필드를 포함해야 하며, key_field 값은 필수."
          }
        },
        "required": [
          "site_id",
          "items"
        ]
      }
    },
    {
      "name": "wc_query",
      "description": "수집된 데이터를 DB에서 조회합니다. FTS5 전문 검색, 통계, 최근 항목 등을 지원합니다.\n\naction별 동작:\n- search: 전문 검색 (query 필요)\n- stats: 사이트별 수집 통계\n- recent: 최근 수집 항목\n- detail: 특정 항목 상세 (item_id 필요)\n- delete: 항목 삭제 (item_id 필요)",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "search",
              "stats",
              "recent",
              "detail",
              "delete"
            ],
            "description": "조회 유형 (기본: search)"
          },
          "query": {
            "type": "string",
            "description": "검색어 (action=search 시)"
          },
          "site_id": {
            "type": "string",
            "description": "특정 사이트로 필터링"
          },
          "item_id": {
            "type": "integer",
            "description": "항목 ID (action=detail, delete 시)"
          },
          "limit": {
            "type": "integer",
            "description": "결과 수 제한 (기본: 20)"
          },
          "offset": {
            "type": "integer",
            "description": "페이지네이션 오프셋 (기본: 0)"
          }
        }
      }
    }
  ]
}
