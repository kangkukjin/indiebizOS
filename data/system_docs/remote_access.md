# ì›ê²© ì ‘ê·¼ ì‹œìŠ¤í…œ (Remote Access)

IndieBiz OSì˜ ì›ê²© ì ‘ê·¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Cloudflare Tunnelì„ í†µí•´ ì™¸ë¶€ì—ì„œ ì•ˆì „í•˜ê²Œ í™ˆ ì„œë²„ë¥¼ ì œì–´í•˜ê³  íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê°œìš”

### ë‘ ê°€ì§€ ì›ê²© ê¸°ëŠ¥

| ê¸°ëŠ¥ | ê²½ë¡œ | ëª©ì  |
|-----|------|------|
| **ì›ê²© Finder** | `/nas/app` | íŒŒì¼ íƒìƒ‰, ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°, ë‹¤ìš´ë¡œë“œ |
| **ì›ê²© ëŸ°ì²˜** | `/launcher/app` | ì‹œìŠ¤í…œ AI/ì—ì´ì „íŠ¸ ì±„íŒ…, ìŠ¤ìœ„ì¹˜ ì‹¤í–‰ |

ê° ê¸°ëŠ¥ì€ **ë³„ë„ì˜ ë¹„ë°€ë²ˆí˜¸**ë¡œ ë…ë¦½ì ìœ¼ë¡œ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- **Cloudflare Tunnel**: í¬íŠ¸ í¬ì›Œë”©/DDNS ì—†ì´ ì•ˆì „í•œ ì™¸ë¶€ ì ‘ê·¼
- **ìë™ SSL**: Cloudflareê°€ HTTPS ì¸ì¦ì„œ ìë™ ê´€ë¦¬
- **ì„¸ì…˜ ì¸ì¦**: ê¸°ëŠ¥ë³„ ë…ë¦½ì ì¸ ë¹„ë°€ë²ˆí˜¸ ë° ì„¸ì…˜ ê´€ë¦¬
- **ê²½ë¡œ ë³´í˜¸**: í—ˆìš©ëœ ê²½ë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥ (ì›ê²© Finder)

### í™œìš© ì˜ˆì‹œ

**ê°œì¸ NASë¡œ í™œìš© (ì›ê²© Finder)**
- ì§‘ì— ë¯¸ë‹ˆ PCë¥¼ ë‘ê³ , ì™¸ì¶œ ì¤‘ ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ íŒŒì¼ íƒìƒ‰/ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°
- ì—¬í–‰ ì¤‘ì—ë„ ì§‘ PCì— ì €ì¥ëœ ì˜í™”ë‚˜ ì‚¬ì§„ì„ ë°”ë¡œ ê°ìƒ
- ë³„ë„ì˜ NAS ì¥ë¹„ ì—†ì´ ê¸°ì¡´ PCë¡œ ê°œì¸ í´ë¼ìš°ë“œ êµ¬ì¶•

**ì›ê²© AI ì„œë²„ë¡œ í™œìš© (ì›ê²© ëŸ°ì²˜)**
- ì™¸ì¶œ ì¤‘ ìŠ¤ë§ˆíŠ¸í°ì—ì„œ ëª¨ë“  í”„ë¡œì íŠ¸ ì—ì´ì „íŠ¸ì—ê²Œ ì§ˆë¬¸/ì§€ì‹œ
- íˆ¬ì ì—ì´ì „íŠ¸ì—ê²Œ ì‹œì¥ ë¶„ì„ ìš”ì²­, ë²•ë¥  ì—ì´ì „íŠ¸ì—ê²Œ ë²•ë ¹ ê²€ìƒ‰ ë“±
- ìŠ¤ìœ„ì¹˜ í•œ ë²ˆ í„°ì¹˜ë¡œ ë‰´ìŠ¤ ìˆ˜ì§‘, ë¦¬í¬íŠ¸ ìƒì„± ë“± ìë™í™” ì‘ì—… ì‹¤í–‰
- ì§‘ PCì˜ AI ì—ì´ì „íŠ¸ ì „ì²´ë¥¼ ì›ê²©ìœ¼ë¡œ êµ¬ë™í•˜ëŠ” ê°œì¸ AI ì„œë²„

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬                              â”‚
â”‚                                                                  â”‚
â”‚  ì‚¬ìš©ì ë¸Œë¼ìš°ì € â”€â”€â–º https://home.mydomain.com/nas/app          â”‚
â”‚                  â””â–º https://home.mydomain.com/launcher/app      â”‚
â”‚                              â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ (Cloudflare Edge)
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Cloudflare Tunnel                           â”‚
â”‚                                                                  â”‚
â”‚  cloudflared tunnel run â—„â”€â”€â–º Cloudflare ë„¤íŠ¸ì›Œí¬                â”‚
â”‚         â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ localhost:8765
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IndieBiz OS ë°±ì—”ë“œ                            â”‚
â”‚                      (FastAPI :8765)                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì›ê²© Finder (api_nas.py)        ì›ê²© ëŸ°ì²˜ (api_launcher_web.py)   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚ /nas/auth/login - ë¡œê·¸ì¸       /launcher/auth/login - ë¡œê·¸ì¸    â”‚
â”‚  â”‚ /nas/files      - íŒŒì¼ ëª©ë¡     /launcher/app      - ì›¹ ì•±     â”‚
â”‚  â”‚ /nas/file       - ìŠ¤íŠ¸ë¦¬ë°                                â”‚   â”‚
â”‚  â”‚ /nas/app        - ì›¹ ì•±        â†’ ê¸°ì¡´ API í˜¸ì¶œ:           â”‚   â”‚
â”‚  â”‚                                  /system-ai/chat          â”‚   â”‚
â”‚  â”‚                                  /projects/*/chat         â”‚   â”‚
â”‚  â”‚                                  /switches                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. ì›ê²© Finder

ì™¸ë¶€ì—ì„œ í™ˆ ì„œë²„ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ê³  ë™ì˜ìƒì„ ìŠ¤íŠ¸ë¦¬ë°í•©ë‹ˆë‹¤.

### ê¸°ëŠ¥
- í´ë” íƒìƒ‰ (Finder ìŠ¤íƒ€ì¼ UI)
- ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë° (êµ¬ê°„ íƒìƒ‰ ì§€ì›)
- í…ìŠ¤íŠ¸ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°
- íŒŒì¼ ë‹¤ìš´ë¡œë“œ

### API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|-----------|--------|------|------|
| `/nas/config` | GET/PUT | - | ì„¤ì • ì¡°íšŒ/ì €ì¥ |
| `/nas/auth/login` | POST | - | ë¡œê·¸ì¸ â†’ ì„¸ì…˜ ë°œê¸‰ |
| `/nas/auth/logout` | POST | âœ“ | ë¡œê·¸ì•„ì›ƒ |
| `/nas/files` | GET | âœ“ | íŒŒì¼/í´ë” ëª©ë¡ |
| `/nas/file` | GET | âœ“ | íŒŒì¼ ìŠ¤íŠ¸ë¦¬ë° (Range ì§€ì›) |
| `/nas/text` | GET | âœ“ | í…ìŠ¤íŠ¸ íŒŒì¼ (10MB ì œí•œ) |
| `/nas/app` | GET | - | ì›¹ ì•± HTML |

### ì„¤ì • íŒŒì¼
ê²½ë¡œ: `data/nas_config.json`

```json
{
  "enabled": true,
  "password": "your_password",
  "allowed_paths": [
    "/Users/username/Videos",
    "/Users/username/Documents"
  ]
}
```

### ë³´ì•ˆ
- **ê²½ë¡œ ë³´í˜¸**: `allowed_paths`ì— ì§€ì •ëœ ë””ë ‰í† ë¦¬ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- Path Traversal (`..`) ì°¨ë‹¨
- ì‹¬ë³¼ë¦­ ë§í¬ ìš°íšŒ ë°©ì§€

---

## 2. ì›ê²© ëŸ°ì²˜

ì™¸ë¶€ì—ì„œ ì‹œìŠ¤í…œ AIì™€ í”„ë¡œì íŠ¸ ì—ì´ì „íŠ¸ë¥¼ ì œì–´í•©ë‹ˆë‹¤.

### ê¸°ëŠ¥
- **ì‹œìŠ¤í…œ AI ì±„íŒ…**: IndieBiz OS ì „ì²´ ì œì–´
- **í”„ë¡œì íŠ¸ ì—ì´ì „íŠ¸ ì±„íŒ…**: ê°œë³„ í”„ë¡œì íŠ¸ AIì™€ ëŒ€í™”
- **ìŠ¤ìœ„ì¹˜ ì‹¤í–‰**: ì›í´ë¦­ìœ¼ë¡œ ìë™í™” ì‘ì—… ì‹¤í–‰

### API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|-----------|--------|------|------|
| `/launcher/config` | GET/POST | - | ì„¤ì • ì¡°íšŒ/ì €ì¥ |
| `/launcher/auth/login` | POST | - | ë¡œê·¸ì¸ â†’ ì„¸ì…˜ ë°œê¸‰ |
| `/launcher/auth/logout` | POST | âœ“ | ë¡œê·¸ì•„ì›ƒ |
| `/launcher/app` | GET | - | ì›¹ ì•± HTML |

### ì„¤ì • íŒŒì¼
ê²½ë¡œ: `data/launcher_web_config.json`

```json
{
  "enabled": true,
  "password": "your_password"
}
```

### ì›¹ ì•± ê¸°ëŠ¥
- ì‹œìŠ¤í…œ AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- í”„ë¡œì íŠ¸ ëª©ë¡ ì‚¬ì´ë“œë°”
- ì—ì´ì „íŠ¸ ì„ íƒ ë° ì±„íŒ…
- ìŠ¤ìœ„ì¹˜ ëª©ë¡ ë° ì‹¤í–‰ ë²„íŠ¼
- ë‹¤í¬ í…Œë§ˆ UI
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸

---

## ì‚¬ì „ ì¤€ë¹„: Cloudflare ê°€ì… ë° ì„¤ì •

ì›ê²© ì ‘ê·¼ì„ ì‚¬ìš©í•˜ë ¤ë©´ **Cloudflare ê³„ì •**ê³¼ **ë„ë©”ì¸**ì´ í•„ìš”í•©ë‹ˆë‹¤.

### 1ë‹¨ê³„: Cloudflare ê³„ì • ê°€ì…

1. **https://dash.cloudflare.com/sign-up** ì ‘ì†
2. ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ
4. **ë¬´ë£Œ(Free) í”Œëœ** ì„ íƒ (Tunnelì€ ë¬´ë£Œ ì œê³µ)

### 2ë‹¨ê³„: workers.dev ì„œë¸Œë„ë©”ì¸ í™œì„±í™” (í•„ìˆ˜)

Cloudflare ê°€ì… í›„ **Workers & Pagesì— í•œ ë²ˆ ì ‘ì†**í•´ì•¼ ë¬´ë£Œ ì„œë¸Œë„ë©”ì¸ì´ ìƒì„±ë©ë‹ˆë‹¤.

1. Cloudflare ëŒ€ì‹œë³´ë“œ â†’ **Workers & Pages** í´ë¦­
2. ì²˜ìŒ ì ‘ì†í•˜ë©´ ìë™ìœ¼ë¡œ ì„œë¸Œë„ë©”ì¸ ìƒì„±ë¨
3. `username.workers.dev` í˜•íƒœì˜ ì„œë¸Œë„ë©”ì¸ í™•ì¸

> âš ï¸ **ì°¸ê³ **: workers.devëŠ” Workers/Pages ì „ìš©ì´ë¼ Tunnelì— ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
> Tunnelì„ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ ë°©ë²•ìœ¼ë¡œ **ìì²´ ë„ë©”ì¸**ì´ í•„ìš”í•©ë‹ˆë‹¤.

### 3ë‹¨ê³„: ë„ë©”ì¸ ì¶”ê°€ (Tunnel ì‚¬ìš© ì‹œ í•„ìš”)

Cloudflare Tunnelì„ ì‚¬ìš©í•˜ë ¤ë©´ **Cloudflareì— ë“±ë¡ëœ ë„ë©”ì¸**ì´ í•„ìš”í•©ë‹ˆë‹¤.

#### ë°©ë²• A: ê¸°ì¡´ ë„ë©”ì¸ ì´ì „ (ê¶Œì¥)
1. Cloudflare ëŒ€ì‹œë³´ë“œ â†’ **Add a Site**
2. ë³´ìœ í•œ ë„ë©”ì¸ ì…ë ¥ (ì˜ˆ: `mydomain.com`)
3. **Free í”Œëœ** ì„ íƒ
4. DNS ë ˆì½”ë“œ ìŠ¤ìº” í™•ì¸
5. ë„ë©”ì¸ ë“±ë¡ê¸°ê´€(ê°€ë¹„ì•„, Namecheap ë“±)ì—ì„œ **ë„¤ì„ì„œë²„ ë³€ê²½**
   - Cloudflareê°€ ì œê³µí•˜ëŠ” ë„¤ì„ì„œë²„ë¡œ ë³€ê²½
   - ì˜ˆ: `xxx.ns.cloudflare.com`, `yyy.ns.cloudflare.com`
6. ë„¤ì„ì„œë²„ ì „íŒŒ ëŒ€ê¸° (ìµœëŒ€ 24ì‹œê°„, ë³´í†µ ëª‡ ì‹œê°„)

#### ë°©ë²• B: Cloudflareì—ì„œ ë„ë©”ì¸ êµ¬ë§¤
1. Cloudflare ëŒ€ì‹œë³´ë“œ â†’ **Domain Registration** â†’ **Register Domains**
2. ì›í•˜ëŠ” ë„ë©”ì¸ ê²€ìƒ‰ ë° êµ¬ë§¤ (ì›ê°€ë¡œ ì œê³µ, ë§ˆí¬ì—… ì—†ìŒ)
3. ì¦‰ì‹œ Cloudflareì— ì—°ë™ë¨

#### ğŸ’¡ ë„ë©”ì¸ì„ ëª°ë¼ë„ ë©ë‹ˆë‹¤!

ì—ì´ì „íŠ¸ê°€ `cf_zones_list` ë„êµ¬ë¡œ ë“±ë¡ëœ ë„ë©”ì¸ì„ ìë™ ì¡°íšŒí•©ë‹ˆë‹¤.
"ì›ê²© ì ‘ê·¼ ì„¤ì •í•´ì¤˜"ë¼ê³ ë§Œ í•˜ë©´ ì—ì´ì „íŠ¸ê°€ ì•Œì•„ì„œ ë„ë©”ì¸ì„ ì°¾ìŠµë‹ˆë‹¤.

### 4ë‹¨ê³„: API í† í° ë°œê¸‰

ì‹œìŠ¤í…œ AIê°€ Cloudflareë¥¼ ì œì–´í•˜ë ¤ë©´ **API í† í°**ì´ í•„ìš”í•©ë‹ˆë‹¤.

1. **https://dash.cloudflare.com/profile/api-tokens** ì ‘ì†
2. **Create Token** í´ë¦­
3. **Edit Cloudflare Workers** í…œí”Œë¦¿ ì„ íƒ (ë˜ëŠ” Custom Token)
4. í•„ìš”í•œ ê¶Œí•œ ì¶”ê°€:
   - `Zone:Zone:Read`
   - `Zone:DNS:Edit`
   - `Account:Cloudflare Tunnel:Edit`
   - `Account:Workers R2 Storage:Edit` (R2 ì‚¬ìš© ì‹œ)
   - `Account:Workers Scripts:Edit` (Workers ì‚¬ìš© ì‹œ)
5. **Continue to summary** â†’ **Create Token**
6. ìƒì„±ëœ í† í° ë³µì‚¬ (âš ï¸ í•œ ë²ˆë§Œ í‘œì‹œë¨!)

### 5ë‹¨ê³„: Account ID í™•ì¸

1. Cloudflare ëŒ€ì‹œë³´ë“œì—ì„œ ì•„ë¬´ ë„ë©”ì¸ ì„ íƒ
2. ìš°ì¸¡ í•˜ë‹¨ **API** ì„¹ì…˜ì—ì„œ **Account ID** ë³µì‚¬

### 6ë‹¨ê³„: IndieBiz OSì— ì„¤ì •

ì‹œìŠ¤í…œ AIì—ê²Œ ë‹¤ìŒê³¼ ê°™ì´ ìš”ì²­:

```
Cloudflare API í† í°ì„ í™˜ê²½ë³€ìˆ˜ë¡œ ì €ì¥í•´ì¤˜.
í† í°: [ë³µì‚¬í•œ í† í°]
Account ID: [ë³µì‚¬í•œ Account ID]
```

ë˜ëŠ” ì§ì ‘ `backend/.env` íŒŒì¼ì— ì¶”ê°€:

```
CLOUDFLARE_API_TOKEN=your_api_token_here
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
```

### 7ë‹¨ê³„: cloudflared ì„¤ì¹˜

í„°ë¯¸ë„ì—ì„œ ì§ì ‘ ì„¤ì¹˜í•˜ê±°ë‚˜, ì‹œìŠ¤í…œ AIì—ê²Œ "cloudflared ì„¤ì¹˜í•´ì¤˜"ë¼ê³  ìš”ì²­í•©ë‹ˆë‹¤.

```bash
# macOS (Homebrew)
brew install cloudflared

# macOS (ì§ì ‘ ë‹¤ìš´ë¡œë“œ)
curl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-darwin-amd64.tgz
tar -xzf cloudflared
sudo mv cloudflared /usr/local/bin/

# Linux (Ubuntu/Debian)
curl -L -o cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb
sudo dpkg -i cloudflared.deb

# Linux (ë‹¤ë¥¸ ë°°í¬íŒ)
curl -L -o cloudflared https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64
chmod +x cloudflared
sudo mv cloudflared /usr/local/bin/
```

### 8ë‹¨ê³„: Cloudflare ë¡œê·¸ì¸ (ìµœì´ˆ 1íšŒ)

```bash
cloudflared tunnel login
```

ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´:
1. Cloudflare ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
2. í„°ë„ì— ì‚¬ìš©í•  **ë„ë©”ì¸ ì„ íƒ**
3. ì¸ì¦ ì™„ë£Œ í›„ ì¸ì¦ì„œê°€ ìë™ ì €ì¥ë¨ (`~/.cloudflared/cert.pem`)

---

## ì›ê²© ì ‘ê·¼ ì„¤ì •: ë‹¨ê³„ë³„ ê°€ì´ë“œ

ì‚¬ì „ ì¤€ë¹„(1~8ë‹¨ê³„)ê°€ ì™„ë£Œë˜ë©´, ì‹œìŠ¤í…œ AIì—ê²Œ ëª…ë ¹í•˜ì—¬ ì›ê²© ì ‘ê·¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.

### 9ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì„¤ì •

ì‹œìŠ¤í…œ AIì—ê²Œ Cloudflare API ì •ë³´ë¥¼ í™˜ê²½ë³€ìˆ˜ë¡œ ì €ì¥í•˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤.

**ì‹œìŠ¤í…œ AIì—ê²Œ ì…ë ¥:**
```
cloudflare ë„êµ¬ì˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì¤˜.
CLOUDFLARE_API_TOKEN: [4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ í† í°]
CLOUDFLARE_ACCOUNT_ID: [5ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Account ID]
```

**ì˜ˆì‹œ:**
```
cloudflare ë„êµ¬ì˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì¤˜.
CLOUDFLARE_API_TOKEN: abc123xyz789...
CLOUDFLARE_ACCOUNT_ID: 1234567890abcdef
```

ì‹œìŠ¤í…œ AIê°€ `backend/.env` íŒŒì¼ì— í™˜ê²½ë³€ìˆ˜ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

### 10ë‹¨ê³„: IndieBiz OS ì¬ì‹œì‘

í™˜ê²½ë³€ìˆ˜ê°€ ì ìš©ë˜ë„ë¡ IndieBiz OSë¥¼ ì¬ì‹œì‘í•©ë‹ˆë‹¤.

- ëŸ°ì²˜ ì°½ì„ ë‹«ê³  ë‹¤ì‹œ ì‹¤í–‰
- ë˜ëŠ” í„°ë¯¸ë„ì—ì„œ ë°±ì—”ë“œ ì¬ì‹œì‘

### 11ë‹¨ê³„: í„°ë„ ì„¤ì •

ì‹œìŠ¤í…œ AIì—ê²Œ í„°ë„ ì„¤ì •ì„ ìš”ì²­í•©ë‹ˆë‹¤. (í”„ë¡œì íŠ¸ ìƒì„± ë¶ˆí•„ìš”)

**ì‹œìŠ¤í…œ AIì—ê²Œ ì…ë ¥:**
```
ì›ê²© ì ‘ê·¼ í„°ë„ì„ ì„¤ì •í•´ì¤˜.
```

**ë˜ëŠ” ë„ë©”ì¸ì„ ì•Œë©´:**
```
home.mydomain.com ë„ë©”ì¸ìœ¼ë¡œ í„°ë„ì„ ì„¤ì •í•´ì¤˜.
```

ì‹œìŠ¤í…œ AIê°€ ìë™ìœ¼ë¡œ:
1. `cf_api`ë¡œ ë“±ë¡ëœ ë„ë©”ì¸ ëª©ë¡ ì¡°íšŒ
2. ì‚¬ìš©ìì—ê²Œ **ê¸°ê¸° êµ¬ë¶„ ì´ë¦„** ì§ˆë¬¸ (ì˜ˆ: "home", "office", "macbook")
3. bashë¡œ `cloudflared tunnel create {í„°ë„ì´ë¦„}` ì‹¤í–‰
4. bashë¡œ `cloudflared tunnel route dns {í„°ë„ì´ë¦„} finder-{ê¸°ê¸°ì´ë¦„}.{ë„ë©”ì¸}` ì‹¤í–‰
5. bashë¡œ `cloudflared tunnel route dns {í„°ë„ì´ë¦„} launcher-{ê¸°ê¸°ì´ë¦„}.{ë„ë©”ì¸}` ì‹¤í–‰
6. `~/.cloudflared/config.yml` íŒŒì¼ ìƒì„±
7. `data/tunnel_config.json`ì— í„°ë„ ì´ë¦„, í˜¸ìŠ¤íŠ¸ëª… ìë™ ì €ì¥

> ğŸ’¡ **ë‹¤ì¤‘ PC ì§€ì›**: ê°™ì€ Cloudflare ê³„ì •ì—ì„œ ì—¬ëŸ¬ PCì— í„°ë„ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ê¸°ê¸° êµ¬ë¶„ ì´ë¦„ìœ¼ë¡œ í˜¸ìŠ¤íŠ¸ëª…ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
> í˜¸ìŠ¤íŠ¸ëª… ì¶©ëŒ ì‹œ ìë™ìœ¼ë¡œ `-2`, `-3` ì ‘ë¯¸ì‚¬ë¥¼ ë¶™ì—¬ ì¬ì‹œë„í•©ë‹ˆë‹¤.

### 12ë‹¨ê³„: ì›ê²© Finder/ëŸ°ì²˜ í™œì„±í™”

ëŸ°ì²˜ì˜ **ì„¤ì •** (ì•ˆê²½ ë©”ë‰´ â†’ ì„¤ì •)ì—ì„œ:

1. **ì›ê²© Finder íƒ­**
   - í™œì„±í™” í† ê¸€ ON
   - ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©)
   - ì ‘ê·¼ í—ˆìš©í•  í´ë” ê²½ë¡œ ì¶”ê°€ (í´ë” ì•„ì´ì½˜ ë²„íŠ¼ìœ¼ë¡œ ì„ íƒ ë˜ëŠ” ì§ì ‘ ì…ë ¥)
   - ì™¸ë¶€ ì ‘ì† URLì´ ìë™ í‘œì‹œë¨ (í„°ë„ ì„¤ì • ì™„ë£Œ ì‹œ)

2. **ì›ê²© ëŸ°ì²˜ íƒ­**
   - í™œì„±í™” í† ê¸€ ON
   - ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (Finderì™€ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ ê¶Œì¥)
   - ì™¸ë¶€ ì ‘ì† URLì´ ìë™ í‘œì‹œë¨ (í„°ë„ ì„¤ì • ì™„ë£Œ ì‹œ)

### 13ë‹¨ê³„: í„°ë„ ì‹¤í–‰

ëŸ°ì²˜ì˜ **ì„¤ì • â†’ í„°ë„ íƒ­**ì—ì„œ í„°ë„ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

1. **í„°ë„ íƒ­** ì„ íƒ (êµ¬ë¦„ ì•„ì´ì½˜)
2. **í„°ë„ ì´ë¦„**: 11ë‹¨ê³„ì—ì„œ ìë™ ì €ì¥ë¨ (ìˆ˜ë™ ì…ë ¥ë„ ê°€ëŠ¥)
3. **í„°ë„ ì‹¤í–‰ í† ê¸€** ON â†’ í„°ë„ ìë™ ì‹¤í–‰
4. **ìë™ ì‹œì‘ í† ê¸€** ON â†’ IndieBiz OS ì‹œì‘ ì‹œ í„°ë„ ìë™ ì‹¤í–‰

> ğŸ’¡ **í„°ë„ ì‹¤í–‰ ìƒíƒœ**: í† ê¸€ ì˜†ì— ì´ˆë¡ìƒ‰ ì ì´ í‘œì‹œë˜ë©´ ì •ìƒ ì‹¤í–‰ ì¤‘

**ìˆ˜ë™ ì‹¤í–‰ì´ í•„ìš”í•œ ê²½ìš° (í„°ë¯¸ë„):**
```bash
cloudflared tunnel run indiebiz
```

### 14ë‹¨ê³„: ì ‘ì† í™•ì¸

ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†í•˜ì—¬ ì •ìƒ ì‘ë™ í™•ì¸:

- **ì›ê²© Finder**: `https://home.mydomain.com/nas/app`
- **ì›ê²© ëŸ°ì²˜**: `https://home.mydomain.com/launcher/app`

---

## ìš”ì•½: ì²˜ìŒë¶€í„° ëê¹Œì§€

| ë‹¨ê³„ | ì‘ì—… | ìœ„ì¹˜ |
|-----|------|------|
| 1 | Cloudflare ê³„ì • ê°€ì… | dash.cloudflare.com |
| 2 | workers.dev ì„œë¸Œë„ë©”ì¸ í™œì„±í™” | Workers & Pages ë°©ë¬¸ |
| 3 | ë„ë©”ì¸ ì¶”ê°€ (Tunnelìš©) | Cloudflare ëŒ€ì‹œë³´ë“œ |
| 4 | API í† í° ë°œê¸‰ | Cloudflare í”„ë¡œí•„ |
| 5 | Account ID í™•ì¸ | Cloudflare ëŒ€ì‹œë³´ë“œ |
| 6 | IndieBiz OSì— ì„¤ì • | ë˜ëŠ” .env ì§ì ‘ í¸ì§‘ |
| 7 | cloudflared ì„¤ì¹˜ | í„°ë¯¸ë„ |
| 8 | cloudflared tunnel login | í„°ë¯¸ë„ (ìµœì´ˆ 1íšŒ) |
| 9 | **ì‹œìŠ¤í…œ AIì—ê²Œ í™˜ê²½ë³€ìˆ˜ ì„¤ì • ìš”ì²­** | IndieBiz OS |
| 10 | IndieBiz OS ì¬ì‹œì‘ | - |
| 11 | **ì‹œìŠ¤í…œ AIì—ê²Œ "í„°ë„ ì„¤ì •í•´ì¤˜"** | IndieBiz OS |
| 12 | ì›ê²© Finder/ëŸ°ì²˜ í™œì„±í™” | ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ |
| 13 | **í„°ë„ ì‹¤í–‰ í† ê¸€ ON** | ì„¤ì • â†’ í„°ë„ íƒ­ |
| 14 | ì ‘ì† í™•ì¸ | ë¸Œë¼ìš°ì € |

---

## Cloudflare Tunnel ì„¤ì • (ìƒì„¸)

### ë„êµ¬ íŒ¨í‚¤ì§€: cloudflare

`cf_api` ë„êµ¬ë¡œ Cloudflare APIë¥¼ í˜¸ì¶œí•˜ê³ , bashë¡œ `cloudflared` CLIë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

#### API í˜¸ì¶œ ì˜ˆì‹œ

```python
# ë„ë©”ì¸ ëª©ë¡ ì¡°íšŒ
cf_api(method="GET", endpoint="/zones")

# í„°ë„ ëª©ë¡ ì¡°íšŒ
cf_api(method="GET", endpoint="/accounts/{account_id}/cfd_tunnel")

# DNS ë ˆì½”ë“œ ì¶”ê°€
cf_api(
    method="POST",
    endpoint="/zones/{zone_id}/dns_records",
    body={"type": "CNAME", "name": "home", "content": "tunnel-id.cfargotunnel.com", "proxied": True}
)
```

> ğŸ’¡ `{account_id}`ëŠ” í™˜ê²½ë³€ìˆ˜ì—ì„œ ìë™ ì¹˜í™˜ë©ë‹ˆë‹¤.

#### CLI ëª…ë ¹ (bash ì‹¤í–‰)

```bash
# í„°ë„ ìƒì„±
cloudflared tunnel create {í„°ë„ì´ë¦„}

# DNS ë¼ìš°íŒ… (ê¸°ê¸° êµ¬ë¶„ ì´ë¦„ í¬í•¨)
cloudflared tunnel route dns {í„°ë„ì´ë¦„} finder-{ê¸°ê¸°ì´ë¦„}.{ë„ë©”ì¸}
cloudflared tunnel route dns {í„°ë„ì´ë¦„} launcher-{ê¸°ê¸°ì´ë¦„}.{ë„ë©”ì¸}

# í„°ë„ ì‹¤í–‰ (ì„¤ì • UI í† ê¸€ ì‚¬ìš© ê¶Œì¥)
cloudflared --config ~/.cloudflared/config.yml tunnel run {í„°ë„ì´ë¦„}
```

### CORS ìë™ ì„¤ì •

`tunnel_config.json`ì˜ `finder_hostname`, `launcher_hostname` ê°’ì´ ë°±ì—”ë“œ ì‹œì‘ ì‹œ CORS í—ˆìš© originì— ìë™ ì¶”ê°€ë©ë‹ˆë‹¤. ë³„ë„ ì„¤ì • ë¶ˆí•„ìš”.

### ìˆ˜ë™ ì„¤ì •

1. **cloudflared ì„¤ì¹˜**
   ```bash
   # macOS
   brew install cloudflared

   # Linux
   curl -L -o cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb
   sudo dpkg -i cloudflared.deb
   ```

2. **Cloudflare ë¡œê·¸ì¸** (ìµœì´ˆ 1íšŒ)
   ```bash
   cloudflared tunnel login
   # ë¸Œë¼ìš°ì €ì—ì„œ ë„ë©”ì¸ ì„ íƒí•˜ì—¬ ì¸ì¦
   ```

3. **í„°ë„ ìƒì„± ë° ë¼ìš°íŒ…**
   ```bash
   cloudflared tunnel create indiebiz
   cloudflared tunnel route dns indiebiz home.mydomain.com
   ```

4. **config.yml ìƒì„±**
   ```yaml
   # ~/.cloudflared/config.yml
   tunnel: {tunnel-id}
   credentials-file: ~/.cloudflared/{tunnel-id}.json

   ingress:
     - hostname: home.mydomain.com
       service: http://localhost:8765
     - service: http_status:404
   ```

5. **í„°ë„ ì‹¤í–‰**
   ```bash
   # í¬ê·¸ë¼ìš´ë“œ
   cloudflared tunnel run indiebiz

   # ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ (ë¶€íŒ… ì‹œ ìë™ ì‹œì‘)
   sudo cloudflared service install
   ```

---

## ëŸ°ì²˜ ì„¤ì • UI

**ì„¤ì • â†’ ì›ê²© Finder / ì›ê²© ëŸ°ì²˜ íƒ­**

ê° íƒ­ì—ì„œ:
- í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
- ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
- ì›¹ì•± URL í™•ì¸
- (ì›ê²© Finderë§Œ) í—ˆìš© ê²½ë¡œ ê´€ë¦¬

---

## ì‹œìŠ¤í…œ í†µí•©

### íŒŒì¼ ìœ„ì¹˜

| êµ¬ë¶„ | íŒŒì¼ |
|-----|------|
| ì›ê²© Finder ë°±ì—”ë“œ | `backend/api_nas.py` |
| ì›ê²© ëŸ°ì²˜ ë°±ì—”ë“œ | `backend/api_launcher_web.py` |
| í„°ë„ ê´€ë¦¬ ë°±ì—”ë“œ | `backend/api_tunnel.py` |
| í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì • | `frontend/src/components/.../SettingsDialog.tsx` |
| Finder ì„¤ì • | `data/nas_config.json` |
| ëŸ°ì²˜ ì„¤ì • | `data/launcher_web_config.json` |
| í„°ë„ ì„¤ì • | `data/tunnel_config.json` |
| Tunnel ë„êµ¬ | `data/packages/installed/tools/cloudflare/` |

### API ë¼ìš°í„° ë“±ë¡

`backend/api.py`:
```python
from api_nas import router as nas_router
from api_launcher_web import router as launcher_web_router
from api_tunnel import router as tunnel_router

app.include_router(nas_router, tags=["nas"])
app.include_router(launcher_web_router, tags=["launcher-web"])
app.include_router(tunnel_router, tags=["tunnel"])
```

### í„°ë„ ê´€ë¦¬ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/tunnel/config` | GET | í„°ë„ ì„¤ì • ì¡°íšŒ |
| `/tunnel/config` | POST | í„°ë„ ì„¤ì • ì €ì¥ |
| `/tunnel/start` | POST | í„°ë„ ì‹¤í–‰ |
| `/tunnel/stop` | POST | í„°ë„ ì¤‘ì§€ |
| `/tunnel/status` | GET | í„°ë„ ìƒíƒœ í™•ì¸ |

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ë³„ë„ ë¹„ë°€ë²ˆí˜¸**: Finderì™€ ëŸ°ì²˜ì— ì„œë¡œ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ê¶Œì¥
2. **ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸**: ì™¸ë¶€ ë…¸ì¶œë˜ë¯€ë¡œ ë³µì¡í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
3. **í—ˆìš© ê²½ë¡œ ì œí•œ**: ì›ê²© Finderì—ì„œ ë¯¼ê°í•œ í´ë” ì œì™¸
4. **Cloudflare Access**: ì¶”ê°€ ì¸ì¦ ë ˆì´ì–´ê°€ í•„ìš”í•œ ê²½ìš° Zero Trust Access ì •ì±… ì„¤ì •

---

## ë¬¸ì œ í•´ê²°

### cloudflared ë¡œê·¸ì¸ í•„ìš”
```bash
cloudflared tunnel login
# ë¸Œë¼ìš°ì €ì—ì„œ Cloudflare ê³„ì • ë¡œê·¸ì¸ í›„ ë„ë©”ì¸ ì„ íƒ
```

### í„°ë„ ì—°ê²° ì‹¤íŒ¨
1. `cloudflared tunnel run` í”„ë¡œì„¸ìŠ¤ í™•ì¸
2. `~/.cloudflared/config.yml` ì„¤ì • í™•ì¸
3. DNS ë ˆì½”ë“œ ì „íŒŒ ëŒ€ê¸° (ëª‡ ë¶„ ì†Œìš”)

### ë¡œê·¸ì¸ ì‹¤íŒ¨
1. ì„¤ì •ì—ì„œ ê¸°ëŠ¥ í™œì„±í™” í™•ì¸
2. ë¹„ë°€ë²ˆí˜¸ ì„¤ì • í™•ì¸
3. ë¸Œë¼ìš°ì € ì¿ í‚¤ ì‚­ì œ í›„ ì¬ì‹œë„

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-02-10*
